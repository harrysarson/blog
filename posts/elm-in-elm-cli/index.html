<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>A wish list for the elm-in-elm CLI - Harry Sarson's Thoughts</title><meta name=description content="How should we design the elm-in-elm command line interface? I suggest that the design should provide
   A pure interface At the core of the design should be a command that is as pure as possible. The compiler takes some (elm) files and produces some (javascript) files. Given the same input files the compiler produces the same output files. This command should not try to connect to the internet, read the elm."><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Harry Sarson\u0027s Thoughts","url":"https:\/\/harrysarson.github.io\/blog\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/harrysarson.github.io\/blog\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/harrysarson.github.io\/blog\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/harrysarson.github.io\/blog\/posts\/elm-in-elm-cli\/","name":"A wish list for the elm in elm c l i"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":""},"headline":"A wish list for the elm-in-elm CLI","description":"How should we design the elm-in-elm command line interface? I suggest that the design should provide\n   A pure interface At the core of the design should be a command that is as pure as possible. The compiler takes some (elm) files and produces some (javascript) files. Given the same input files the compiler produces the same output files. This command should not try to connect to the internet, read the elm.","inLanguage":"en","wordCount":615,"datePublished":"2020-01-31T22:00:00","dateModified":"2020-01-31T22:00:00","image":"https:\/\/harrysarson.github.io\/blog\/","keywords":[""],"mainEntityOfPage":"https:\/\/harrysarson.github.io\/blog\/posts\/elm-in-elm-cli\/","publisher":{"@type":"Organization","name":"https:\/\/harrysarson.github.io\/blog\/","logo":{"@type":"ImageObject","url":"https:\/\/harrysarson.github.io\/blog\/","height":60,"width":60}}}</script><meta property="og:title" content="A wish list for the elm-in-elm CLI"><meta property="og:description" content="How should we design the elm-in-elm command line interface? I suggest that the design should provide
   A pure interface At the core of the design should be a command that is as pure as possible. The compiler takes some (elm) files and produces some (javascript) files. Given the same input files the compiler produces the same output files. This command should not try to connect to the internet, read the elm."><meta property="og:url" content="https://harrysarson.github.io/blog/posts/elm-in-elm-cli/"><meta property="og:type" content="website"><meta property="og:site_name" content="Harry Sarson's Thoughts"><meta name=twitter:title content="A wish list for the elm-in-elm CLI"><meta name=twitter:description content="How should we design the elm-in-elm command line interface? I suggest that the design should provide
   A pure interface At the core of the design should be a command that is as pure as possible. The â€¦"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.71.1"><link rel=alternate href=https://harrysarson.github.io/blog/index.xml type=application/rss+xml title="Harry Sarson's Thoughts"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://harrysarson.github.io/blog/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://harrysarson.github.io/blog/css/syntax.css><link rel=stylesheet href=https://harrysarson.github.io/blog/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://harrysarson.github.io/blog/>Harry Sarson's Thoughts</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"></ul></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=posts-heading><h1>A wish list for the elm-in-elm CLI</h1><hr class=small></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><div id=preamble><div class=sectionbody><div class=paragraph><p>How should we design the elm-in-elm command line interface?
I suggest that the design should provide</p></div></div></div><div class=sect1><h2 id=_a_pure_interface>A pure interface</h2><div class=sectionbody><div class=paragraph><p>At the core of the design should be a command that is as pure as possible.
The compiler takes some (elm) files and produces some (javascript) files.
Given the same input files the compiler produces the same output files.
This command should not try to connect to the internet, read the <code>elm.json</code> file or try to fetch packages from a cache.
All the input files (including packages) that it needs must be provided as arguments to the command <sup class=footnote>[<a id=_footnoteref_1 class=footnote href=#_footnotedef_1 title="View footnote.">1</a>]</sup>.</p></div></div></div><div class=sect1><h2 id=_a_high_level_command>A high level command</h2><div class=sectionbody><div class=paragraph><p>Using a low level compiler CLI directly quickly gets cumbersome and users reach for higher level commands to build actual software.
Traditionally, these higher level commands execute the lower level command as a sub-process.
It may be preferable for elm-in-elm to use the library version of the lower level command rather than executing the command directly.
This command can read the <code>elm.json</code> file, fetch the necessary packages, compile them <sup class=footnote>[<a id=_footnoteref_2 class=footnote href=#_footnotedef_2 title="View footnote.">2</a>]</sup>
and pass them to the lower level command.</p></div></div></div><div class=sect1><h2 id=_support_for_common_work_flows>Support for common work-flows</h2><div class=sectionbody><div class=paragraph><p>We could support common/encouraged work-flows by providing bespoke commands.
For example, a test command that builds and runs all the tests for an application or package supports test driven work-flows.
To flesh out how these extra commands would interact with each other, I think it worth considering a test command even if an implementation of such a command is a long way off.</p></div></div></div><div class=sect1><h2 id=_my_draft>My draft</h2><div class=sectionbody><div class=paragraph><p>Threfore, a starting point for the CLI is three sub-commands.
The following are draft man pages:</p></div><div class=listingblock><div class=content><pre class=highlight><code class=language-bash data-lang=bash>$ elm-in-elm --help
A compiler for elm, written in elm.

USAGE:
    elm-in-elm [OPTIONS] [SUBCOMMAND]

OPTIONS:
    -V, --version           Print version info and exit
        --list              List installed commands
    -h, --help              Prints help information

Some common elm-in-elm commands are (see all commands with --list):
    compile     Compile an elm file
    build       Build an elm application or library
    test        Run the tests


See 'elm-in-elm help &lt;command&gt;' for more information on a specific command.

$ elm-in-elm help compile
Compile an elm file.

Usage: elm-in-elm compile [OPTIONS] INPUT

Options:
    -h, --help              Display this message
    -L PATH                 Add a directory to the library search path.
    -l NAME                 Link the generated crate(s) to the specified native
                            library NAME.
        --emit              Comma separated list of types of output for the
                            compiler to emit. One of js or ast.
    -o FILENAME             Write output to &lt;filename&gt;
        --target TARGET     Target triple for which the code is compiled
    -V, --version           Print version info and exit
    -v, --verbose           Use verbose output

Additional help:
    --help -v               Print the full set of options elm-in-elm compile accepts


$ elm-in-elm help build
Build an elm application or package.

Usage: elm-in-elm build [OPTIONS]

Options:
    -h, --help              Display this message
    --example &lt;NAME&gt;...     Build the specified example
    --test &lt;NAME&gt;...        Build the specified test target
    --release               Build artifacts in release mode, with optimizations
    --target &lt;TRIPLE&gt;       Build for the target triple
    -V, --version           Print version info and exit
    -v, --verbose           Use verbose output
    -h, --help              Prints help information


$ elm-in-elm help test
Execute all tests.


Usage: elm-in-elm test [OPTIONS]

Options:
    -h, --help              Display this message
    --example &lt;NAME&gt;...     Test only the specified example
    --test &lt;NAME&gt;...        Test only the specified test target
    --target &lt;TRIPLE&gt;       Build for the target triple
    -V, --version           Print version info and exit
    -v, --verbose           Use verbose output
    -h, --help              Prints help information</code></pre></div></div><div class=paragraph><p>Harry.</p></div></div></div><div id=footnotes><hr><div class=footnote id=_footnotedef_1><a href=#_footnoteref_1>1</a>. Think of using <code>gcc main.c -lcurl</code> to compile your c program whilst linking the <code>libcurl.a</code> library (installed using <code>sudo apt install libcurl4-openssl-dev</code>).</div><div class=footnote id=_footnotedef_2><a href=#_footnoteref_2>2</a>. Traditionally external code dependancies are compiled seperately and then these compiled artefacts are linked into the application. Compilation times are generally decreased if recompiling the application does not require recompiling external code which will not change.</div></div></article><ul class="pager blog-pager"><li class=previous><a href=https://harrysarson.github.io/blog/posts/effect-modules/ data-toggle=tooltip data-placement=top title="Effect modules in elm">&larr; Previous Post</a></li><li class=next><a href=https://harrysarson.github.io/blog/posts/stepping/ data-toggle=tooltip data-placement=top title="Stepping inside the elm runtime">Next Post &rarr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"></ul><p class="credits copyright text-muted">&nbsp;&bull;&nbsp;&copy;
2020
&nbsp;&bull;&nbsp;
<a href=https://harrysarson.github.io/blog/>Harry Sarson's Thoughts</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.71.1</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://harrysarson.github.io/blog/js/main.js></script><script>renderMathInElement(document.body);</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://harrysarson.github.io/blog/js/load-photoswipe.js></script></body></html>